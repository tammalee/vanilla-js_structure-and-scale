{"version":3,"file":"place.js","sources":["src/components/faves.js","src/components/events.js","src/components/dom.js","src/place.js"],"sourcesContent":["let favesID = 'places_faves';\n\n/**\n * Add a place to the faves\n * @param {String} id The place ID\n */\nfunction addFave (id) {\n\n\t// Get saved items\n\tlet faves = JSON.parse(localStorage.getItem(favesID)) || {};\n\n\t// Add place to it\n\tfaves[id] = true;\n\n\t// Save back to localStorage\n\tlocalStorage.setItem(favesID, JSON.stringify(faves));\n\n}\n\n/**\n * Remove a place from faves\n * @param {String} id The place ID\n */\nfunction removeFave (id) {\n\n\t// Get saved items\n\tlet faves = JSON.parse(localStorage.getItem(favesID)) || {};\n\n\t// Remove place from it\n\tdelete faves[id];\n\n\t// Save back to localStorage\n\tlocalStorage.setItem(favesID, JSON.stringify(faves));\n\n}\n\n/**\n * Check if a place is a favorite\n * @param {String}  id The place ID\n * @param {Boolean}    If true, the place is a favorite\n */\nfunction isFave (id) {\n\n\t// Get saved items\n\tlet faves = JSON.parse(localStorage.getItem(favesID)) || {};\n\n\t// Check if fave exists\n\treturn faves[id];\n\n}\n\nexport { addFave, removeFave, isFave };","import { removeFave, addFave } from './faves.js';\n\n/**\n * Handle click events\n * @param  {Event} event The event object\n */\nfunction clickHandler (event) {\n\n\t// Make sure a [data-fave] button was clicked\n\tlet btn = event.target.closest('[data-fave]');\n\tif (!btn) return;\n\n\t// Get place ID\n\tlet id = btn.getAttribute('data-fave');\n\n\t// Update button UI and save\n\n\tif (btn.getAttribute('aria-pressed') === 'true') {\n\t\tbtn.setAttribute('aria-pressed', false);\n\t\tremoveFave(id);\n\t} else {\n\t\tbtn.setAttribute('aria-pressed', true);\n\t\taddFave(id);\n\t}\n\n}\n\n\n// Listen for clicks on fave and visited buttons\ndocument.addEventListener('click', clickHandler);","import { isFave } from \"./faves.js\";\n\n/**\n * Load icons onto the homepage for favorited places\n */\nfunction loadIcons () {\n\n\t// Get places\n\tlet places = document.querySelectorAll('[data-place]');\n\n\t// Create an icon\n\tlet icon = document.createElement('span');\n\ticon.setAttribute('aria-label', \"Favourited\");\n\ticon.textContent = ' ♥';\n\n\t// Loop through each place and add an icon if it's a favorite\n\tfor (let place of places) {\n\n\t\t// Get the place ID\n\t\tlet id = place.getAttribute('data-place');\n\n\t\t// If place is not a fave, carry on\n\t\tif (!isFave(id)) continue;\n\n\t\t// Otherwise, add an icon\n\t\tlet title = place.querySelector('.place-title');\n\t\tif (!title) continue;\n\t\ttitle.append(icon.cloneNode(true));\n\n\t}\n}\n\n/**\n * Load buttons into the UI\n * @return {[type]} [description]\n */\nfunction loadButtons () {\n\n\t// Check for controls\n\tlet controls = document.querySelector('[data-controls]');\n\tif (!controls) return;\n\n\t// Get the content ID\n\tlet id = controls.getAttribute('data-controls');\n\n\t// Inject buttons\n\tcontrols.innerHTML =\n\t\t`<p>\n\t\t\t<button data-fave=\"${id}\" aria-pressed=\"${isFave(id) ? true : false}\">\n\t\t\t\t<span aria-hidden=\"true\n\t\t\t\t\">♥</span> Favorite\n\t\t\t</button>\n\t\t</p>`;\n\n}\n\nexport { loadIcons, loadButtons };","import { loadButtons } from './components/dom.js';\nimport './components/events.js';\n\nloadButtons();"],"names":["favesID","document","addEventListener","event","btn","target","closest","id","getAttribute","setAttribute","faves","JSON","parse","localStorage","getItem","setItem","stringify","removeFave","addFave","controls","querySelector","innerHTML","isFave","loadButtons"],"mappings":";yBAAA,IAAIA,EAAU,eC6BdC,SAASC,iBAAiB,SAvB1B,SAAuBC,GAGtB,IAAIC,EAAMD,EAAME,OAAOC,QAAQ,eAC/B,IAAKF,EAAK,OAGV,IAAIG,EAAKH,EAAII,aAAa,aAIe,SAArCJ,EAAII,aAAa,iBACpBJ,EAAIK,aAAa,gBAAgB,GDKnC,SAAqBF,GAGpB,IAAIG,EAAQC,KAAKC,MAAMC,aAAaC,QAAQd,KAAa,UAGlDU,EAAMH,GAGbM,aAAaE,QAAQf,EAASW,KAAKK,UAAUN,ICb5CO,CAAWV,KAEXH,EAAIK,aAAa,gBAAgB,GDfnC,SAAkBF,GAGjB,IAAIG,EAAQC,KAAKC,MAAMC,aAAaC,QAAQd,KAAa,GAGzDU,EAAMH,IAAM,EAGZM,aAAaE,QAAQf,EAASW,KAAKK,UAAUN,ICO5CQ,CAAQX,OCcV,WAGC,IAAIY,EAAWlB,SAASmB,cAAc,mBACtC,IAAKD,EAAU,OAGf,IAAIZ,EAAKY,EAASX,aAAa,iBAG/BW,EAASE,UACR,iCACsBd,sBFPxB,SAAiBA,GAMhB,OAHYI,KAAKC,MAAMC,aAAaC,QAAQd,KAAa,IAG5CO,GEC+Be,CAAOf,gGC7CpDgB"}